{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/nailtonjunior/rock/gameplay/src/screens/AppointmentDetails/index.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport { Fontisto } from '@expo/vector-icons';\nimport { useRoute } from '@react-navigation/native';\nimport { BorderlessButton } from 'react-native-gesture-handler';\nimport * as Linking from 'expo-linking';\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Share from \"react-native-web/dist/exports/Share\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport BannerImg from \"../../assets/banner.png\";\nimport { styles } from \"./styles\";\nimport { theme } from \"../../global/styles/theme\";\nimport { api } from \"../../services/api\";\nimport { ListDivider } from \"../../components/ListDivider\";\nimport { Background } from \"../../components/Background\";\nimport { ListHeader } from \"../../components/ListHeader\";\nimport { ButtonIcon } from \"../../components/ButtonIcon\";\nimport { Member } from \"../../components/Member\";\nimport { Header } from \"../../components/Header\";\nimport { Load } from \"../../components/Load\";\nexport function AppointmentDetails() {\n  var _this = this;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      widget = _useState2[0],\n      setWidget = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var route = useRoute();\n  var _ref = route.params,\n      guildSelected = _ref.guildSelected;\n\n  function fetchGuildWidget() {\n    var response;\n    return _regeneratorRuntime.async(function fetchGuildWidget$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(api.get(\"/guilds/\" + guildSelected.guild.id + \"/widget.json\"));\n\n          case 3:\n            response = _context.sent;\n            setWidget(response.data);\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            Alert.alert('Verifique as configurações do servidor. Será que o Widget está habilitado?');\n\n          case 10:\n            _context.prev = 10;\n            setLoading(false);\n            return _context.finish(10);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7, 10, 13]], Promise);\n  }\n\n  function handleShareInvitation() {\n    var message = Platform.OS === 'ios' ? \"Junte-se a \" + guildSelected.guild.name : widget.instant_invite;\n    Share.share({\n      message: message,\n      url: widget.instant_invite\n    });\n  }\n\n  function handleOpenGuild() {\n    Linking.openURL(widget.instant_invite);\n  }\n\n  useEffect(function () {\n    fetchGuildWidget();\n  }, []);\n  return React.createElement(Background, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, React.createElement(Header, {\n    title: \"Detalhes\",\n    action: guildSelected.guild.owner && React.createElement(BorderlessButton, {\n      onPress: handleShareInvitation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, React.createElement(Fontisto, {\n      name: \"share\",\n      size: 24,\n      color: theme.colors.primary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), React.createElement(ImageBackground, {\n    source: BannerImg,\n    style: styles.banner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.bannerContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, guildSelected.guild.name), React.createElement(Text, {\n    style: styles.subtitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, guildSelected.description))), loading ? React.createElement(Load, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }) : React.createElement(React.Fragment, null, React.createElement(ListHeader, {\n    title: \"Jogadores\",\n    subtitle: \"Total \" + widget.members.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }), React.createElement(FlatList, {\n    data: widget.members,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(Member, {\n        data: item,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      });\n    },\n    ItemSeparatorComponent: function ItemSeparatorComponent() {\n      return React.createElement(ListDivider, {\n        isCentered: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 43\n        }\n      });\n    },\n    style: styles.members,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  })), guildSelected.guild.owner && React.createElement(View, {\n    style: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, React.createElement(ButtonIcon, {\n    title: \"Entrar na partida\",\n    onPress: handleOpenGuild,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  })));\n}","map":{"version":3,"sources":["/home/nailtonjunior/rock/gameplay/src/screens/AppointmentDetails/index.tsx"],"names":["React","useState","useEffect","Fontisto","useRoute","BorderlessButton","Linking","BannerImg","styles","theme","api","ListDivider","Background","ListHeader","ButtonIcon","Member","Header","Load","AppointmentDetails","widget","setWidget","loading","setLoading","route","params","guildSelected","fetchGuildWidget","get","guild","id","response","data","Alert","alert","handleShareInvitation","message","Platform","OS","name","instant_invite","Share","share","url","handleOpenGuild","openURL","owner","colors","primary","banner","bannerContent","title","subtitle","description","members","length","item","footer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Fontisto } from '@expo/vector-icons';\nimport { useRoute } from '@react-navigation/native';\nimport { BorderlessButton } from 'react-native-gesture-handler';\nimport * as Linking from 'expo-linking';\n\nimport {\n  ImageBackground,\n  Text,\n  View,\n  Alert,\n  FlatList,\n  Share,\n  Platform\n} from 'react-native';\n\nimport BannerImg from '../../assets/banner.png';\n\nimport { styles } from './styles';\nimport { theme } from '../../global/styles/theme';\nimport { api } from '../../services/api';\n\nimport { AppointmentProps } from '../../components/Appointment';\nimport { ListDivider } from '../../components/ListDivider';\nimport { Background } from '../../components/Background';\nimport { ListHeader } from '../../components/ListHeader';\nimport { ButtonIcon } from '../../components/ButtonIcon';\nimport { Member, MemberProps } from '../../components/Member';\nimport { Header } from '../../components/Header';\nimport { Load } from '../../components/Load';\n\ntype Params = {\n  guildSelected: AppointmentProps\n}\n\ntype GuildWidget = {\n  id: string;\n  name: string;\n  instant_invite: string;\n  members: MemberProps[];  \n}\n\nexport function AppointmentDetails(){\n  const [widget, setWidget] = useState<GuildWidget>({} as GuildWidget);\n  const [loading, setLoading] = useState(true);\n\n  const route = useRoute();\n  const { guildSelected } = route.params as Params;\n\n  async function fetchGuildWidget() {\n    try {\n      const response = await api.get(`/guilds/${guildSelected.guild.id}/widget.json`);\n      setWidget(response.data);      \n    } catch {\n      Alert.alert('Verifique as configurações do servidor. Será que o Widget está habilitado?');      \n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function handleShareInvitation() {\n    const message = Platform.OS === 'ios' \n    ? `Junte-se a ${guildSelected.guild.name}`\n    : widget.instant_invite;\n\n    Share.share({\n      message,\n      url: widget.instant_invite\n    });    \n  }\n\n  function handleOpenGuild(){\n    Linking.openURL(widget.instant_invite);\n  }\n\n  useEffect(() => {\n    fetchGuildWidget();\n  },[]);\n  return (\n    <Background>\n      <Header \n        title=\"Detalhes\"\n        action={\n          guildSelected.guild.owner &&\n          <BorderlessButton onPress={handleShareInvitation}>\n            <Fontisto \n              name=\"share\"\n              size={24}\n              color={theme.colors.primary}\n            />\n          </BorderlessButton>\n        }\n      />\n\n      <ImageBackground \n        source={BannerImg}\n        style={styles.banner}\n      >\n        <View style={styles.bannerContent}>\n          <Text style={styles.title}> \n            { guildSelected.guild.name }\n          </Text>\n\n          <Text style={styles.subtitle}>\n            { guildSelected.description }\n          </Text>\n        </View>\n      </ImageBackground>\n\n      {\n        loading ? <Load /> :\n        <>\n          <ListHeader \n            title=\"Jogadores\"\n            subtitle={`Total ${widget.members.length}`}\n          />\n\n          <FlatList \n            data={widget.members}\n            keyExtractor={item => item.id}\n            renderItem={({ item }) => (\n              <Member data={item} />\n            )}\n            ItemSeparatorComponent={() => <ListDivider isCentered />}\n            style={styles.members}\n          />\n        </>\n      }\n\n      {\n         guildSelected.guild.owner &&\n        <View style={styles.footer}>\n          <ButtonIcon \n            title=\"Entrar na partida\" \n            onPress={handleOpenGuild}\n          />\n        </View>\n      }\n    </Background>\n  );\n}"]},"metadata":{},"sourceType":"module"}